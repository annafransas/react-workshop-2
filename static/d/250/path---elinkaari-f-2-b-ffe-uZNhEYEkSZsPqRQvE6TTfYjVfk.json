{"data":{"markdownRemark":{"html":"<h1>Komponenttien elinkaari</h1>\n<p>Jokaisella React komponentilla on elinkaari, joka alkaa siitä hetkestä, kun komponentti ensimmäisen kerran ilmestyy näytölle eli \"mountataan\" ja päättyy siihen, kun komponentti katoaa näytöltä eli \"dismountataan\". Näiden välissä oleellisia elinkaaren vaiheita ovat komponentin tilanmuutokset, eli kun komponentti saa ulkopuolelta uusia propseja tai sitten sen sisäinen tila muuttuu. Lähtökohtaisesti aina kun komponenttiin kohdistuu tilanmuutos, se piirrettään, eli \"renderöidään\" näytölle uudelleen, jotta esimerkiksi propsina saadut muutokset näkyvät näytöllä.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/react-workshop-2/static/0307d8376722cf5b0a368df80cf726de/6b691/component-lifecycle.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 51.48717948717949%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABP0lEQVQoz3VRy3aCMBDl/z+nXdUuqyx8LAqt9PC0AkLBI6IJAQxOL8HaRcs9OcnMndx5JBrlMXkm7fzbCh3arMkzKNlQ8E6CUY8r/QeN0k9aTGj2QPMJLZ7p9YU+lr09e6T5E5V7pR0Tj0N2V9G0v/6fFJq8XNj5JDirOIPRSdnLpKw4/0qS1WpZCSEV2XUd47yqQAjGGFwNh2ma0+lU13VrvRaHnGrG0siyrLkCDLbPQIo8eTNNXcEwDGTROOe+77uua9u24zh1xVGkOp8GEgiCQIgKZM2Z6zj2D1BfQ/UwDLfbLbKoua5Dh2maxnEcRRGih6IYQmVZ7hWKosAsvRiXcCPP82G2QZxl2U4B0bqub08o8UQXqYBcvRhTeZ6H9o7H4108kOgIdca+o/8qdF8r3CsjK9ymabC3bTsm/gY/JjWzT8En+wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"lifecycle\"\n        title=\"\"\n        src=\"/react-workshop-2/static/0307d8376722cf5b0a368df80cf726de/35c67/component-lifecycle.png\"\n        srcset=\"/react-workshop-2/static/0307d8376722cf5b0a368df80cf726de/7b5b4/component-lifecycle.png 188w,\n/react-workshop-2/static/0307d8376722cf5b0a368df80cf726de/d266f/component-lifecycle.png 375w,\n/react-workshop-2/static/0307d8376722cf5b0a368df80cf726de/35c67/component-lifecycle.png 750w,\n/react-workshop-2/static/0307d8376722cf5b0a368df80cf726de/6b691/component-lifecycle.png 975w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n      />\n  </span>\n  </a></p>\n<h2>useEffect</h2>\n<p>React tarjoaa <code class=\"language-text\">useEffect</code>-hookin, jonka avulla voimme suorittaa haluamaamme koodia komponentin eri elinkaaren vaiheissa. <code class=\"language-text\">useEffect</code> ottaa ensimmäiseksi parametrikseen funktion ja toiseksi listan, joka sisältää ne muuttujat joiden muutoksia haluamme pitää silmällä.<br>\n<br>\nFunktio importoidaan projektiin vastaavasti kuin useState. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span>  <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Component mounted!\"</span><span class=\"token punctuation\">)</span>   \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Koska esimerkissämme hookin toinen parametri on tyhjä lista, niin funktiomme suoritetaan vain komponenttimme elinkaaren alussa kerran.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Value changed!\"</span><span class=\"token punctuation\">)</span>   \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span> value <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Nyt funktiomme suoritetaan joka kerta kun kuvitteellinen muuttuja <code class=\"language-text\">value</code>, joka voisi olla esimerkiksi prop tai tilamuuttuja, muuttuu.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Component rendered!\"</span><span class=\"token punctuation\">)</span>   \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Voimme myös jättää toisen parametrin pois. Tällöin funktiomme kutsutaan joka kerta, kun komponentti renderöidään, eli kun jokin asia sen tilassa (props tai state) muuttuu.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Component mounted!\"</span><span class=\"token punctuation\">)</span>\n <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Component dismounted!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Tarvittaessa pääsemme myös komponentin elinkaaren viimeiseen vaiheeseen, eli kun komponentti dismountataan. Tämä onnistuu palauttamalla <code class=\"language-text\">useEffect</code>-hookista funktion, joka suoritetaan dismounttauksen yhteydessä. Nyt esimerkkimme tulostaa komponentin elinkaaren alussa <strong>Component mounted!</strong> ja lopussa <strong>Component dismounted!</strong>.</p>\n<p><strong>Tehtävä:</strong> Lisää effekti, joka suoritetaan silloin, kun <code class=\"language-text\">App</code> renderöidään ensimmäisen kerran</p>\n<p><a href=\"/react-workshop-2/react-workshop-2/API/\">Nyt olemme valmiita vastaanottamaan dataa sovelluksemme ulkopuolelta.</a></p>","frontmatter":{"title":"Elinkaari"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/elinkaari/"}}